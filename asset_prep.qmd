---
title: "asset preparation mouse asymetry"
output: github_document
author: "Joanes Grandjean
---

### load libraries
```r
#tidy stuff
library(tidyverse,warn.conflicts = FALSE)
library(glue,warn.conflicts = FALSE)

#easystat
library(datawizard,warn.conflicts = FALSE)
```



## asset preparation and validation. 
the exisiting DSURQE label info is not very clear. Here I reshape it for better visualization.

### reshape the DSURQE label index

```r
roi_raw <- read_csv('asset/DSURQE_40micron_R_mapping_mod.csv',col_types = cols())
cog_y <- read_table('asset/COG_y',col_names = FALSE)


roi_merge <- tibble(dsurqe_struct=c(roi_raw$Structure,roi_raw$Structure), 
                   abi_struct=c(roi_raw$ABI,roi_raw$ABI), 
                   tissue=c(roi_raw$`tissue type`, roi_raw$`tissue type`), 
                   label=c(roi_raw$`right label`, roi_raw$`left label`),
                   ABI_struct=c(roi_raw$ABI_struct, roi_raw$ABI_struct),
                   HEX=c(roi_raw$HEX, roi_raw$HEX),
                   ABI_order=c(roi_raw$ABI_order, roi_raw$ABI_order),
                   hemisphere=c(rep('right', dim(roi_raw)[1]), rep('left', dim(roi_raw)[1]))) %>% arrange(label)

duplicated_index <- duplicated(roi_merge$label)
duplicated_label <- roi_merge$label[duplicated_index]

roi_merge<-roi_merge[!duplicated_index,]

roi_merge$hemisphere[roi_merge$label %in% duplicated_label] <- 'inter'

roi_merge <- roi_merge %>% arrange(label)

roi_merge$HEX <- paste0('#',roi_merge$HEX)

# add COG_y$X1 as a column to roi_merge as cog_y
roi_merge <- roi_merge %>% add_column(cog_y = cog_y$X1)

write_csv(roi_merge, 'asset/roi_label_clean.csv')

```

### find missing data and write to file. 
```r 

vol_AI_list <- file.path(data_path,'vol_AI') %>% dir  %>% gsub("_01_SE01_MR.nii.gz","",.)
study$POND_Mouse_ID[which(!study$POND_Mouse_ID %in% vol_AI_list)] %>% as_tibble() %>%  write_csv('asset/missing.csv')

```

